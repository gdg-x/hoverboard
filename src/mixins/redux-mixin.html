<link rel="import" href="../../bower_components/polymer-redux/polymer-redux.html">
<script src="/node_modules/redux/dist/redux.min.js"></script>

<script src="../../scripts/redux/constants.js" type="text/javascript"></script>
<script src="../../scripts/redux/actions.js" type="text/javascript"></script>
<script src="../../scripts/redux/reducer.js" type="text/javascript"></script>

<script>
  const heroSettings = {$ heroSettings | dump | safe $};

  const initialState = {
    ui: {
      isDrawerOpened: false,
      viewport: {
        isPhone: true,
        isTabletPlus: false
      },
      videoDialog: {
        opened: false,
        disableControls: false,
        youtubeId: '',
        title: ''
      }
    },
    route: 'home',
    hero: null,
    tickets: [],
    partners: [],
    videos: [],
    blog: {
      list: {}
    }
  };

  const appReducer = (state = initialState, action) => {
    return {
      ui: uiReducer(state.ui, action),
      route: routeReducer(state.route, action),
      hero: heroReducer(state.hero, action),
      tickets: ticketsReducer(state.tickets, action),
      partners: partnersReducer(state.partners, action),
      videos: videosReducer(state.videos, action),
      blog: blogReducer(state.blog, action)
    };
  };

  const store = Redux.createStore(
    appReducer,

    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()
  );

  ReduxMixin = PolymerRedux(store);
</script>
